openapi: 3.1.0
info:
  contact:
    name: StackQL Studios
    url: https://stackql.io/
    email: info@stackql.io
  x-stackql-serviceName: arc_zonal_shift
  x-aws-serviceName: arczonalshift
  x-aws-protocol: aws.protocols#restJson1
  x-dateGenerated: '2025-05-05'
  version: '2022-10-30'
  title: AWS ARC - Zonal Shift
  description: |-
    Welcome to the API Reference Guide for zonal shift and zonal autoshift in Amazon Route 53 Application Recovery Controller (ARC).

    You can start a zonal shift to move traffic for a load balancer resource away from an Availability Zone to help your application recover quickly from an impairment in an Availability Zone. For example, you can recover your application from a developer's bad code deployment or from an Amazon Web Services infrastructure failure in a single Availability Zone.

    You can also configure zonal autoshift for supported load balancer resources. Zonal autoshift is a capability in ARC where you authorize Amazon Web Services to shift away application resource traffic from an Availability Zone during events, on your behalf, to help reduce your time to recovery. Amazon Web Services starts an autoshift when internal telemetry indicates that there is an Availability Zone impairment that could potentially impact customers.

    To help make sure that zonal autoshift is safe for your application, you must also configure practice runs when you enable zonal autoshift for a resource. Practice runs start weekly zonal shifts for a resource, to shift traffic for the resource away from an Availability Zone. Practice runs help you to make sure, on a regular basis, that you have enough capacity in all the Availability Zones in an Amazon Web Services Region for your application to continue to operate normally when traffic for a resource is shifted away from one Availability Zone.

    Before you configure practice runs or enable zonal autoshift, we strongly recommend that you prescale your application resource capacity in all Availability Zones in the Region where your application resources are deployed. You should not rely on scaling on demand when an autoshift or practice run starts. Zonal autoshift, including practice runs, works independently, and does not wait for auto scaling actions to complete. Relying on auto scaling, instead of pre-scaling, can result in loss of availability.

    If you use auto scaling to handle regular cycles of traffic, we strongly recommend that you configure the minimum capacity of your auto scaling to continue operating normally with the loss of an Availability Zone.

    Be aware that ARC does not inspect the health of individual resources. Amazon Web Services only starts an autoshift when Amazon Web Services telemetry detects that there is an Availability Zone impairment that could potentially impact customers. In some cases, resources might be shifted away that are not experiencing impact.

    For more information about using zonal shift and zonal autoshift, see the [Amazon Route 53 Application Recovery Controller Developer Guide](https://docs.aws.amazon.com/r53recovery/latest/dg/what-is-route53-recovery.html).
servers:
- description: The AWS ARC - Zonal Shift regional endpoint
  url: https://arc-zonal-shift.{region}.amazonaws.com
  variables:
    region:
      description: The AWS region
      enum:
      - us-east-1
      - us-east-2
      - us-west-1
      - us-west-2
      - us-gov-west-1
      - us-gov-east-1
      - ca-central-1
      - eu-north-1
      - eu-west-1
      - eu-west-2
      - eu-west-3
      - eu-central-1
      - eu-south-1
      - af-south-1
      - ap-northeast-1
      - ap-northeast-2
      - ap-northeast-3
      - ap-southeast-1
      - ap-southeast-2
      - ap-east-1
      - ap-south-1
      - sa-east-1
      - me-south-1
      default: us-east-1
paths: {}
components:
  schemas:
    AppliedStatus:
      type: string
      enum:
      - APPLIED
      - NOT_APPLIED
    AppliedWeights:
      type: object
      additionalProperties:
        $ref: '#/components/schemas/Weight'
    AutoshiftAppliedStatus:
      type: string
      enum:
      - APPLIED
      - NOT_APPLIED
    AutoshiftExecutionStatus:
      type: string
      enum:
      - ACTIVE
      - COMPLETED
    AutoshiftObserverNotificationStatus:
      type: string
      enum:
      - ENABLED
      - DISABLED
    AutoshiftSummaries:
      type: array
      items:
        $ref: '#/components/schemas/AutoshiftSummary'
    AutoshiftsInResource:
      type: array
      items:
        $ref: '#/components/schemas/AutoshiftInResource'
    AvailabilityZone:
      type: string
      maxLength: 20
    AvailabilityZones:
      type: array
      items:
        $ref: '#/components/schemas/AvailabilityZone'
    BlockedDate:
      type: string
      pattern: ^[0-9]{4}-[0-9]{2}-[0-9]{2}$
      minLength: 10
      maxLength: 10
    BlockedDates:
      type: array
      items:
        $ref: '#/components/schemas/BlockedDate'
    BlockedWindow:
      type: string
      pattern: ^(Mon|Tue|Wed|Thu|Fri|Sat|Sun):[0-9]{2}:[0-9]{2}-(Mon|Tue|Wed|Thu|Fri|Sat|Sun):[0-9]{2}:[0-9]{2}$
      minLength: 19
      maxLength: 19
    BlockedWindows:
      type: array
      items:
        $ref: '#/components/schemas/BlockedWindow'
    ConflictExceptionReason:
      type: string
      enum:
      - ZonalShiftAlreadyExists
      - ZonalShiftStatusNotActive
      - SimultaneousZonalShiftsConflict
      - PracticeConfigurationAlreadyExists
      - AutoShiftEnabled
      - PracticeConfigurationDoesNotExist
      - ZonalAutoshiftActive
    ControlConditionType:
      type: string
      enum:
      - CLOUDWATCH
    ControlConditions:
      type: array
      items:
        $ref: '#/components/schemas/ControlCondition'
    ExpiresIn:
      type: string
      pattern: ^([1-9][0-9]*)(m|h)$
      minLength: 2
      maxLength: 5
    ExpiryTime:
      type: string
      format: date-time
    ManagedResourceSummaries:
      type: array
      items:
        $ref: '#/components/schemas/ManagedResourceSummary'
    MaxResults:
      type: integer
      minimum: 1
      maximum: 100
    MetricIdentifier:
      type: string
      pattern: ^.*$
      minLength: 8
      maxLength: 1024
    PracticeRunOutcome:
      type: string
      enum:
      - FAILED
      - INTERRUPTED
      - PENDING
      - SUCCEEDED
    ResourceArn:
      type: string
      pattern: ^arn:.*$
      minLength: 8
      maxLength: 1024
    ResourceIdentifier:
      type: string
      minLength: 8
      maxLength: 1024
    ResourceName:
      type: string
      minLength: 1
      maxLength: 256
    ShiftType:
      type: string
      enum:
      - ZONAL_SHIFT
      - PRACTICE_RUN
      - FIS_EXPERIMENT
      - ZONAL_AUTOSHIFT
    StartTime:
      type: string
      format: date-time
    ValidationExceptionReason:
      type: string
      enum:
      - InvalidExpiresIn
      - InvalidStatus
      - MissingValue
      - InvalidToken
      - InvalidResourceIdentifier
      - InvalidAz
      - UnsupportedAz
      - InvalidAlarmCondition
      - InvalidConditionType
      - InvalidPracticeBlocker
      - FISExperimentUpdateNotAllowed
      - AutoshiftUpdateNotAllowed
    Weight:
      type: number
      format: float
      minimum: 0.0
      maximum: 1.0
    ZonalAutoshiftStatus:
      type: string
      enum:
      - ENABLED
      - DISABLED
    ZonalShiftComment:
      type: string
      maxLength: 128
    ZonalShiftId:
      type: string
      pattern: ^[A-Za-z0-9-]+$
      minLength: 6
      maxLength: 36
    ZonalShiftStatus:
      type: string
      enum:
      - ACTIVE
      - EXPIRED
      - CANCELED
    ZonalShiftSummaries:
      type: array
      items:
        $ref: '#/components/schemas/ZonalShiftSummary'
    ZonalShiftsInResource:
      type: array
      items:
        $ref: '#/components/schemas/ZonalShiftInResource'
